# Logging and Output Guide for Empathetic Self-talk Coach

This guide explains how to use the logging and output features of the Empathetic Self-talk Coach backend.

## Directory Structure

The system saves various outputs to the following directories:

- `logs/transcriptions`: Contains JSON files of speech transcriptions with details
- `logs/responses`: Contains JSON files of Gemini responses with context
- `output/audio`: Contains the TTS audio files generated by TogetherAI
- `static/audio`: Contains audio files served by the API (also accessible via API endpoints)

## Viewing Transcriptions

When audio is processed through the `/api/v1/audio/process` endpoint:

1. The text from your audio will be transcribed
2. The transcription will be saved to `logs/transcriptions/{timestamp}_{audio_id}_transcription.json`
3. The text, confidence score, and metadata will be displayed in the console
4. The transcription is also included in the API response

Examining the JSON files in the transcriptions directory will let you see what text was recognized from your audio.

## Viewing Gemini Responses

When you generate responses through the `/api/v1/response/generate` endpoint:

1. Your input will be sent to Gemini with the detected emotion
2. The response will be saved to `logs/responses/{timestamp}_{response_id}_response.json`
3. The user input, emotion, and Gemini's response will be displayed in the console
4. The response is also included in the API response

Examining the JSON files in the responses directory will let you see how Gemini responded to different inputs and emotions.

## Accessing TTS Audio Files

When TTS audio is generated:

1. The audio is saved in both:
   - `static/audio/` (for API access)
   - `output/audio/{timestamp}_{response_id}_togetherai.mp3` (for review)
2. The paths are displayed in the console
3. The URLs are included in the API responses

You can listen to the generated audio files directly from the `output/audio` directory.

## Managing Output Files

Use the `manage_outputs.py` script to manage your output files:

```bash
# Create all necessary directories
python manage_outputs.py create

# List all output files across directories
python manage_outputs.py list

# Clear all output files (preserves directories)
python manage_outputs.py clear
```

## Testing with Enhanced Output

The enhanced `test_api.py` script provides detailed output and saves all responses to the logs directory:

```bash
# Run the test script
python test_api.py
```

This will:
1. Test each endpoint
2. Display detailed information about the responses
3. Save the full responses to the logs directory
4. Save any generated audio to the output directory

## Troubleshooting

If you don't see output in the expected directories:

1. Check that the directories exist by running `python manage_outputs.py create`
2. Ensure the API server is running (`uvicorn app.main:app --reload`)
3. Look for error messages in the console output
4. Check the API responses for error details 